{"version":3,"sources":["scripts/main.js"],"names":["rows","prevElement","count","body","document","querySelector","tableHead","headers","querySelectorAll","tableBody","headerText","sortOrder","activeRow","children","activeInput","form","createElement","button","replace","prev","current","compareCondition","prevContent","innerHTML","currentContent","toNumber","text","Number","split","join","toThousands","number","toString","className","textContent","append","i","length","label","field","type","name","toLocaleLowerCase","required","addEventListener","action","fields","newEmployee","newMessage","title","message","messageTitle","messageDescription","dataset","qa","style","letterSpacing","toLocaleUpperCase","margin","paddingBottom","setTimeout","remove","removeOldMessage","lastElementChild","matches","preventDefault","map","selectedOfficeIndex","selectedIndex","value","selected","targetElement","target","columntIndex","sort","currentRow","prevRow","prevText","currentText","match","localeCompare","prevNumber","currentNumber","targetRow","closest","undefined","cellInput","activeElement","previousText","changeInput","act","e","active","saveInput","width","clientWidth","key"],"mappings":"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","file":"main.70899d18.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\nconst tableHead = document.querySelector('thead');\nconst headers = tableHead.querySelectorAll('th');\nconst tableBody = document.querySelector('tbody');\nconst headerText = {};\nconst sortOrder = {};\nlet rows;\nlet prevElement;\nlet count;\nlet activeRow = tableBody.children[0];\nlet activeInput = false;\nconst form = document.createElement('form');\nconst button = document.createElement('button');\n\nfunction replace(prev, current, compareCondition) {\n  if (compareCondition) {\n    count++;\n\n    const prevContent = prev.innerHTML;\n    const currentContent = current.innerHTML;\n\n    prev.innerHTML = currentContent;\n    current.innerHTML = prevContent;\n  }\n}\n\nfunction toNumber(text) {\n  return Number(text.split(',').join('').split('$').join(''));\n}\n\nfunction toThousands(number) {\n  return number.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\nform.className = 'new-employee-form';\nbutton.textContent = 'Save to table';\nbody.append(form);\n\nfor (let i = 0; i < [...headers].length; i++) {\n  const label = document.createElement('label');\n  let field;\n\n  label.textContent = `${headers[i].textContent}:`;\n  form.append(label);\n\n  if (label.textContent === 'Office:') {\n    field = document.createElement('select');\n\n    field.innerHTML = `\n      <option value=\"value1\" selected>Tokyo</option>\n      <option value=\"value2\">Singapore</option>\n      <option value=\"value3\">London</option>\n      <option value=\"value3\">New York</option>\n      <option value=\"value4\">Edinburgh</option>\n      <option value=\"value5\">San Francisco</option>\n    `;\n  } else {\n    field = document.createElement('input');\n\n    if (label.textContent === 'Age:' || label.textContent === 'Salary:') {\n      field.type = 'number';\n    } else {\n      field.type = 'text';\n    }\n  }\n\n  field.name = headers[i].textContent.toLocaleLowerCase();\n  field.required = true;\n  label.append(field);\n  form.append(button);\n\n  headerText[headers[i].textContent] = i;\n  sortOrder[headers[i].textContent] = false;\n}\n\nform.addEventListener('submit', action => {\n  const fields = form.querySelectorAll('label');\n  const newEmployee = document.createElement('tr');\n\n  function newMessage(title, text, type) {\n    const message = document.createElement('div');\n    const messageTitle = document.createElement('h2');\n    const messageDescription = document.createElement('p');\n\n    message.className = `notification ${type}`;\n    message.dataset.qa = 'notification';\n    messageTitle.className = 'title';\n    messageTitle.style.letterSpacing = '-1.2px';\n    messageTitle.textContent = title.toLocaleUpperCase();\n    messageDescription.style.margin = '0';\n    messageDescription.style.paddingBottom = '16px';\n    message.append(messageTitle);\n    message.append(messageDescription);\n    messageDescription.textContent = text;\n\n    body.append(message);\n\n    setTimeout(() => {\n      message.remove();\n    }, 3000);\n  }\n\n  function removeOldMessage() {\n    if (body.lastElementChild.matches('.notification')) {\n      body.lastElementChild.remove();\n    }\n  }\n\n  action.preventDefault();\n\n  [...fields].map(field => {\n    const text = document.createElement('td');\n\n    if (field.children[0].matches('select')) {\n      const selectedOfficeIndex = field.children[0].selectedIndex;\n\n      text.textContent\n        = field.children[0].children[selectedOfficeIndex].textContent;\n    } else if (field.children[0].name === 'salary') {\n      text.textContent = `$${toThousands(field.children[0].value)}`;\n    } else {\n      text.textContent = field.children[0].value;\n    }\n\n    newEmployee.append(text);\n  });\n\n  if (fields[0].children[0].value.length < 4) {\n    removeOldMessage();\n\n    newMessage('Invalid name'\n      , 'Name length should be more then 3 letters.', 'error');\n  } else if (fields[3].children[0].value < 18\n      || fields[3].children[0].value > 90) {\n    removeOldMessage();\n\n    newMessage('Invalid age'\n      , 'Age should be more then 17 years, and less then 91 years.', 'error');\n  } else {\n    removeOldMessage();\n\n    newMessage('Success'\n      , 'New employee was successfully added.', 'success');\n    tableBody.append(newEmployee);\n\n    [...fields].map(field => {\n      if (!field.children[0].matches('select')) {\n        field.children[0].value = null;\n      } else {\n        field.children[0].children[0].selected = true;\n      }\n    });\n  }\n});\n\ntableHead.addEventListener('click', action => {\n  rows = tableBody.querySelectorAll('tr');\n\n  const targetElement = action.target;\n  const columntIndex = headerText[targetElement.textContent];\n\n  targetElement.className = 'active';\n\n  if (prevElement === targetElement.textContent) {\n    sortOrder[targetElement.textContent]\n      = !sortOrder[targetElement.textContent];\n  } else {\n    sortOrder[targetElement.textContent] = true;\n  }\n\n  if (!targetElement.matches('th')) {\n    return;\n  }\n\n  do {\n    count = 0;\n\n    [...rows].sort((currentRow, prevRow) => {\n      const prevText = prevRow.children[columntIndex].textContent;\n      const currentText = currentRow.children[columntIndex].textContent;\n\n      if (prevText[0].match(/[A-Z]/i)) {\n        if (sortOrder[targetElement.textContent] === true) {\n          replace(prevRow, currentRow\n            , prevText.localeCompare(currentText) === 1);\n        } else {\n          replace(prevRow, currentRow\n            , prevText.localeCompare(currentText) === -1);\n        }\n      } else {\n        const prevNumber = toNumber(prevText);\n        const currentNumber = toNumber(currentText);\n\n        if (sortOrder[targetElement.textContent] === true) {\n          replace(prevRow, currentRow\n            , prevNumber > currentNumber);\n        } else {\n          replace(prevRow, currentRow\n            , prevNumber < currentNumber);\n        }\n      }\n    });\n  } while (count > 0);\n\n  prevElement = targetElement.textContent;\n});\n\ntableBody.addEventListener('click', action => {\n  const targetRow = action.target.closest('tr');\n\n  if (!targetRow.matches('tr')) {\n    return;\n  }\n\n  activeRow.className = undefined;\n  targetRow.className = 'active';\n  activeRow = targetRow;\n});\n\ntableBody.addEventListener('dblclick', action => {\n  const targetElement = action.target;\n  const cellInput = document.createElement('input');\n  const activeElement = targetElement;\n  const previousText = activeElement.textContent;\n\n  function changeInput(act) {\n    tableBody.addEventListener(act, e => {\n      const active = e.target;\n\n      if (!active.matches('td')) {\n        return;\n      }\n\n      if (active !== activeElement) {\n        saveInput();\n      }\n    });\n  }\n\n  function saveInput() {\n    if (cellInput.value === '') {\n      activeElement.textContent = previousText;\n    } else {\n      activeElement.textContent = cellInput.value;\n    }\n\n    cellInput.remove();\n    activeInput = false;\n  }\n\n  if (!activeElement.matches('td')) {\n    return;\n  }\n\n  if (activeInput === false) {\n    activeInput = true;\n    cellInput.className = 'cell-input';\n    cellInput.value = activeElement.textContent;\n    cellInput.style.width = `${activeElement.clientWidth - (18 * 2)}px`;\n    activeElement.textContent = '';\n    activeElement.append(cellInput);\n\n    changeInput('click');\n    changeInput('dblclick');\n\n    activeElement.addEventListener('keypress', e => {\n      if (e.key === 'Enter') {\n        saveInput();\n      }\n    });\n  }\n});\n"]}